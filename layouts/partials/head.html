<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  {{ with .Description }}
  <meta name="description" content="{{ . }}" />
  {{ end }}
  <meta name="keywords" content="{{ if .Keywords }}{{ range.Keywords }}{{ . }}, {{ end }}{{ else if isset .Params "tags" }}{{ range.Params.tags }}{{ . }}, {{ end }}{{ end }}">

  <!-- open graph -->
  <meta property="og:type" content="article" />
  <meta property="og:description" content="{{ .Description }}" />
  <meta property="og:title" content="{{ .Title }}" />
  <meta property="og:site_name" content="{{ .Site.Title }}" />
  <meta property="og:image" content="" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="" />
  <meta property="og:image:height" content="" />
  <meta property="og:url" content="{{ .Permalink }}" />
  <meta property="og:locale" content="{{ .Site.LanguageCode }}" />
  <meta property="article:published_time" content="{{ .Date.Format "2006-01-02"}} " />
  <meta property="article:modified_time" content="{{ .Date.Format "2006-01-02"}} " />

  {{ if .Keywords }}
  {{ range .Keywords }}
    <meta property="article:tag" content="{{ . }}" />
  {{ end }}
  {{ else if isset .Params "tags" }}
  {{ range .Params.tags }}
    <meta property="article:tag" content="{{ . }}" />
  {{ end }}
  {{ end }}

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="{{ if .Title }}{{ .Title }} | {{ end }}{{ .Site.Title }}" />
  <meta name="twitter:description" content="{{ .Description | default .Summary }}|{{ .Site.Params.Description }}" />
  <meta name="twitter:image:src" content="" />
  <meta name="twitter:domain" content="{{ .Permalink }}" />

  <title>
    {{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}
  </title>

  <link rel="canonical" href="{{ .Permalink }}" />
  {{ $sitetitle := .Site.Title }}
  {{ with .OutputFormats.Get "RSS" }}
    <link
      href="{{ .RelPermalink }}"
      rel="alternate"
      type="application/rss+xml"
      title="{{ $sitetitle }}"
    />
  {{ end }}

  <!-- icon meta -->
  {{ if (fileExists "static/favicon.ico") }}
    <link rel="icon" href="{{ "favicon.ico" | absURL }}">
  {{ end }}
  {{ if (fileExists "static/favicon16x16.png") }}
    <link rel="icon" type="image/png" sizes="16x16" href="{{ "favicon-16x16.png" | absURL }}">
  {{ end}}
  {{ if (fileExists "static/favicon32x32.png") }}
    <link rel="icon" type="image/png" sizes="32x32" href="{{ "favicon-32x32.png" | absURL }}">
  {{ end}}
  {{ if (fileExists "static/apple-touch-icon.png") }}
    <link rel="apple-touch-icon" href="{{ "apple-touch-icon.png" | absURL }}" />
  {{ end}}

  <!-- Reset -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/modern-normalize@1.0.0/modern-normalize.min.css">

  <!-- Use Hugo Pipes to process the Sass file (convert to CSS, minify, and add a hash) -->
  {{ $base_style := resources.Get "css/basic.scss" | toCSS }}
  {{ $main_style := resources.Get "css/main.scss" | toCSS }}
  {{ $highlight_style := resources.Get "css/highlight.css" }}

  {{ $CSS := slice $base_style $main_style $highlight_style | resources.Concat "style.css" }}

  {{ if not .Site.IsServer }}
    {{ $CSS := $CSS | minify | fingerprint }}
    <link rel="stylesheet" href="{{ $CSS.Permalink }}" integrity="{{ $CSS.Data.Integrity }}" rel="preload stylesheet" as="style"/>
  {{ else }}
    <link rel="stylesheet" href="{{ $CSS.Permalink }}" rel="preload stylesheet" as="style"/>
  {{ end }}

  {{ if not .Site.IsServer }}
    {{ template "_internal/google_analytics_async.html" . }}
  {{ end }}
</head>
